Purpose
-------
- Provides the lightweight client-side glue for the admin tooling plus blog article interactions: one script supports the conversational WebSocket panel, the other powers “mark as read”/share affordances on the public article listing.

Key Templates/Assets
--------------------
- `admin_conversational.js`: mounts on `/admin/conversational`, handles session/user input, WebSocket lifecycle (+ health check), streaming assistant deltas, source-link rendering, and ElevenLabs PCM playback with a pooled `AudioContext`.
- `main.js`: wired into `templates/base.html` for every page; it POSTs to `/api/content/{id}/mark-read`, fades articles out for read items, tries the Web Share API, and falls back to clipboard copy plus a transient toast message.

Coupling to Backend
-------------------
- `admin_conversational.js` talks to `/admin/conversational/ws`, `/admin/conversational/health`, and expects payloads shaped like turn/session IDs, source hits, and optional PCM chunks that the FastAPI worker emits.
- `main.js` relies on `/api/content/{content_id}/mark-read` and the share payloads generated by the server-rendered article metadata; both scripts assume `static_version` query strings exist so the server can bust caches.

Risks/UX-Maintainability Concerns
---------------------------------
- Both scripts use global DOM selectors (e.g., `getElementById('chat-log')`) and lack feature-flagged guards, so changing the template structure can break runtime behavior without compile-time safety.
- There is no bundler or module scope, so duplicated helpers (error handling, animation timing) cannot be shared easily and there is no automated lint/test harness for the JavaScript layer.
- `admin_conversational.js` spawns `AudioContext` instances on demand and streams raw PCM; browsers have tight policies on autoplay and audio resource limits, which can surface as silent failures if error handling is missing.

Refactor Opportunities
--------------------
- Wrap shared helpers (toast creation, fetch helpers) in small modules and introduce a bundler/ES module pipeline so we can unit test or reuse the logic across admin scripts.
- Move conversational logic into a dedicated Stimulus/HTMX/XHR layer (HTMX is already on the page) to simplify restart logic and allow stubbed events in tests.
- Replace manual clipboard fallbacks with an abstraction that surfaces success/failure states to the backend (via data attributes) to better trace sharing metrics.

Reviewed files: 2
