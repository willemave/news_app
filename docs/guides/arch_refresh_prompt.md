Please write out a super detailed overview of the system and output the file to docs/architecture.md. This file should include all the details to explain the code, architecture, database, types, interfaces and any other details that are necessary to understand the _code_ of the system, don't include scripts or operational details.

Specifically make sure: 
1. All classes are represented with description and interface. 
2. Database schema is described as a markdown table. 
3. All (pydantic, ios, etc) types are included
4. Mermaid diagram of the system architecture. 
5. Key points on specific behavior authentication, apis, storage, data flow, etc work. 
